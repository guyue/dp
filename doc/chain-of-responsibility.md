# 职责链模式

Tags: 设计模式 读书笔记 技术

---

职责链模式可以用来隔离请求的发送者和接收者的技术，消除客户与处理程序之间的耦合，并生成由可以对请求进行处理的对象组成的链。

## 职责链的结构

职责链由多个不同类型的对象组成。**发送者**（sender）是发出请求的对象，而**接收者**（receiver）是链中那些接收这种请求并对其进行处理或传递的对象。请求本身有时候也是一个对象，它封装着与操作有关的所有数据。其典型的运转流程大致是：
1. 发送者知道链中的第一个接收者，并向这个接收者发出请求；
2. 每一个接收者都对请求进行分析，要么处理掉它，要么向下传递；
3. 每一个接收者知道的其他接收对象只有一个，即它在链中的下家（successor）；
4. 如果没有任何接收者处理请求，那么请求将从链上离开。不同的实现对此反应不同，即可以悄无声息，也可以抛出错误。


## 职责链模式的使用场景

如果事先不知道在几个对象中有哪些能够处理请求，那么这就属于应该使用职责链的情况。

如果这批对象在开发期间不可知，而是需要动态指定的话，那么也应该使用这种模式。

该模式还可以用在对于每个请求都不止有一个对象可以对他进行处理的情况下。

## 职责链模式之利

借助职责链模式，可以动态选择由哪些对象处理请求。这意味着你可以使用只在运行期间才能知道的条件来把任务分派给最恰当的对象。

## 职责链模式之弊

由于在职责链模式中，请求与具体的处理程序被隔离开来，因此无法保证它一定会被处理，而不是径直从链尾离开。这种模式使用的接收者是隐式的（implicit），因此无法得知具体由哪个对象处理。